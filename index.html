<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Discord Profile Viewer</title>
</head>
<body>
<h1>Login with Discord</h1>
<button id="loginBtn">Login</button>

<div id="profile" style="display:none;">
    <h2>Profile Details</h2>
    <img id="avatar" src="" alt="Avatar" width="100" />
    <p><strong>Username:</strong> <span id="username"></span></p>
    <p><strong>Email:</strong> <span id="email"></span></p>
    <p><strong>ID:</strong> <span id="id"></span></p>
    <p><strong>Discriminator:</strong> <span id="discriminator"></span></p>
</div>

<script>
document.getElementById('loginBtn').onclick = () => {
  // Redirect to backend route that starts OAuth flow
  window.location.href = '/auth/discord';
};

// After login, the backend redirects back with profile data.
// For example, you can fetch profile data from an endpoint:

async function fetchProfile() {
  const res = await fetch('/profile');
  if (res.ok) {
    const data = await res.json();
    document.getElementById('profile').style.display = 'block';
    document.getElementById('avatar').src = `https://cdn.discordapp.com/avatars/${data.id}/${data.avatar}.png`;
    document.getElementById('username').innerText = data.username + '#' + data.discriminator;
    document.getElementById('email').innerText = data.email;
    document.getElementById('id').innerText = data.id;
    document.getElementById('discriminator').innerText = data.discriminator;
  }
}

// Call fetchProfile() if user is logged in (you can trigger this after OAuth)
</script>
</body>
</html>
